<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/d3rwan-blog/styles.1685a65f5c5eaed5bc13.css">html{font-size:100}body{margin:0 0 0 calc(100vw - 100%);color:#222;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{border:0;max-width:100%;margin:inherit auto}img,img+em{display:block}img+em{text-align:center;margin-top:.2rem;font-style:italic;font-weight:600;font-size:.875rem}hr{border:0;color:#222;display:block;height:1.625rem;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#222 0,#222 15px,transparent 0,transparent 26px);width:6.25rem}a{color:#5d93ff;text-decoration:none}a:active,a:focus,a:hover{color:#f7a046}b,strong{font-weight:600}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#222;font-size:.875rem;font-style:italic;margin-bottom:0;text-align:center}.anchor{margin-left:-1.875rem!important;padding-right:.875rem!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.Author-module--author__photo--36xCH{display:inline-block;margin-bottom:0;border-radius:50%;background-clip:padding-box}.Author-module--author__title--2CaTb{font-size:1.125rem;font-weight:600;line-height:1.82813rem;margin:.8125rem 0}.Author-module--author__title-link--Yrism,.Author-module--author__title-link--Yrism:focus,.Author-module--author__title-link--Yrism:hover{color:#222}.Author-module--author__subtitle--cAaEB{color:#888;line-height:1.625rem;margin-bottom:1.625rem}.Icon-module--icon--Gpyvw{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor;font-style:normal;font-weight:400;speak:none;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Contacts-module--contacts--1rGd1{margin-bottom:1.625rem}.Contacts-module--contacts__list--3OgdW{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;padding:0;margin:.625rem -.1875rem;width:8.75rem}.Contacts-module--contacts__list-item--16p9q{padding:0;margin:.25rem;display:flex;align-content:center;align-items:center;justify-content:center;height:2.1875rem;width:2.1875rem;line-height:2.1875rem;border-radius:50%;text-align:center;border:1px solid #ebebeb}.Contacts-module--contacts__list-item-link--2MIDn{border:0;display:flex;color:#222}.Contacts-module--contacts__list-item-link--2MIDn:focus,.Contacts-module--contacts__list-item-link--2MIDn:hover{color:#5d93ff}.Copyright-module--copyright--1ariN{color:#b6b6b6;font-size:.875rem}.Menu-module--menu--Efbin{margin-bottom:1.625rem}.Menu-module--menu__list--31Zeo{list-style:none;padding:0;margin:0}.Menu-module--menu__list-item--1lJ6B{padding:0;margin:.625rem 0}.Menu-module--menu__list-item-link--10Ush{font-size:1rem;color:#222;font-weight:400;border:0}.Menu-module--menu__list-item-link--10Ush:focus,.Menu-module--menu__list-item-link--10Ush:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Menu-module--menu__list-item-link--active--2CbUO{color:#222;border-bottom:1px solid #222}.Sidebar-module--sidebar--X4z2p{width:100%}.Sidebar-module--sidebar__inner--Jdc5s{position:relative;padding:1.5625rem 1.25rem 0}@media screen and (min-width:685px){.Sidebar-module--sidebar--X4z2p{width:calc(41.625% - 1.09375rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(12n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(12n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:1.875rem 1.25rem 0}.Sidebar-module--sidebar__inner--Jdc5s:after{background:#e6e6e6;background:-webkit-gradient(linear,left top,left bottom,from(#e6e6e6),color-stop(48%,#e6e6e6),to(#fff));background:linear-gradient(180deg,#e6e6e6 0,#e6e6e6 48%,#fff);position:absolute;content:"";width:.0625rem;height:33.75rem;top:30px;right:-10px;bottom:0}}@media screen and (min-width:960px){.Sidebar-module--sidebar--X4z2p{width:calc(33.3% - 1.25rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(3n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(3n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:2.5rem}}.Layout-module--layout--3Pyz6{max-width:66.875rem;margin-left:auto;margin-right:auto}.Layout-module--layout--3Pyz6:before{content:"";display:table}.Layout-module--layout--3Pyz6:after{content:"";display:table;clear:both}.Feed-module--feed__item--2D5rE{margin-bottom:2.03125rem}.Feed-module--feed__item--2D5rE:last-child{margin-bottom:.8125rem}.Feed-module--feed__item-title--3nigr{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.Feed-module--feed__item-title-link--iFMRs{color:#222}.Feed-module--feed__item-title-link--iFMRs:focus,.Feed-module--feed__item-title-link--iFMRs:hover{color:#222;border-bottom:1px solid #222}.Feed-module--feed__item-description--1uO8e{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.Feed-module--feed__item-meta-time--3t1fg{font-size:.875rem;color:#222;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-reading--2RlxZ{color:#5e5e5e;font-weight:200;font-size:small;float:right}.Feed-module--feed__item-meta-divider--N-Q0A{margin:0 .3125rem}.Feed-module--feed__item-meta-category-link--23f8F{font-size:.875rem;color:#f7a046;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-category-link--23f8F:focus,.Feed-module--feed__item-meta-category-link--23f8F:hover{color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI{font-size:1rem;color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI:focus,.Feed-module--feed__item-readmore--1u6bI:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Page-module--page--2nMky{margin-bottom:3.25rem}.Page-module--page__inner--2M_vz{padding:1.5625rem 1.25rem}.Page-module--page__title--GPD8L{font-size:2.5rem;font-weight:600;line-height:3.25rem;margin-top:0;margin-bottom:2.35625rem}.Page-module--page__body--Ic6i6{font-size:1rem;line-height:1.625rem;margin:0 0 1.625rem}.Page-module--page--2nMky .Page-module--back-button--2qnR3{display:block;max-width:5.625rem;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;text-align:center;color:#222;border:1px solid #e6e6e6;border-radius:1.25rem;font-size:1rem;font-weight:400;margin-bottom:1.625rem}@media screen and (min-width:685px){.Page-module--page--2nMky{width:calc(58.275% - .78125rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(12n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(12n+1){clear:both}.Page-module--page__inner--2M_vz{padding:1.875rem 1.25rem}}@media screen and (min-width:960px){.Page-module--page--2nMky{width:calc(66.6% - .625rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(3n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(3n+1){clear:both}.Page-module--page__inner--2M_vz{padding:2.5rem 2.1875rem}}.Pagination-module--pagination--2H3nO{margin-top:3.25rem;display:flex}.Pagination-module--pagination__prev--bet5s{width:50%;text-align:left}.Pagination-module--pagination__prev-link--1Nzs6{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__prev-link--1Nzs6:focus,.Pagination-module--pagination__prev-link--1Nzs6:hover{color:#5d93ff}.Pagination-module--pagination__prev-link--disable--Yklx9{pointer-events:none;color:#bbb}.Pagination-module--pagination__next--3hFiN{width:50%;text-align:right}.Pagination-module--pagination__next-link--3FUtA{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__next-link--3FUtA:focus,.Pagination-module--pagination__next-link--3FUtA:hover{color:#5d93ff}.Pagination-module--pagination__next-link--disable--30UwZ{pointer-events:none;color:#bbb}.Author-module--author--2Yefr{border-top:1px solid #e6e6e6;max-width:40rem;padding-top:1.25rem;line-height:1.625rem;margin-top:1.625rem;margin-bottom:3.25rem}.Author-module--author__bio-twitter--n-O9n{display:block;text-decoration:underline}@media screen and (min-width:685px){.Author-module--author--2Yefr{margin-left:auto;margin-right:auto}}.Content-module--content--3p512{max-width:59.0625rem;padding:0 .9375rem;margin:0 auto}.Content-module--content__title--2BDW9{font-size:2rem;max-width:40rem;font-weight:600;text-align:center;line-height:2.68125rem;margin:1.625rem auto 0}.Content-module--content__body--2TrQ- figure{margin-bottom:1.625rem}.Content-module--content__body--2TrQ- figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.Content-module--content__body--2TrQ- figure blockquote p{max-width:40rem;font-size:1.6817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.Content-module--content__body--2TrQ- a{text-decoration:underline}.Content-module--content__body--2TrQ- *{max-width:40rem;margin-left:auto;margin-right:auto}.Content-module--content__body--2TrQ- img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--3p512{padding:0}.Content-module--content__title--2BDW9{font-size:3rem;line-height:3.65625rem;margin-top:3.65625rem;margin-bottom:2.4375rem}.Content-module--content__body--2TrQ-,.Content-module--content__body--2TrQ- p{font-size:1.125rem;line-height:1.82813rem;margin-bottom:1.82813rem}}.Meta-module--meta__date--29eD7{font-style:italic;text-align:right}.Tags-module--tags--1L_ct{margin-bottom:.8125rem}.Tags-module--tags__list--91FqN{list-style:none;margin:0 -.625rem;padding:0}.Tags-module--tags__list-item--1M30P{display:inline-block;margin:.625rem .3125rem}.Tags-module--tags__list-item-link--3SL_8{display:inline-block;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;border:1px solid #e6e6e6;text-decoration:none;border-radius:1.25rem;color:#222}.Tags-module--tags__list-item-link--3SL_8:focus,.Tags-module--tags__list-item-link--3SL_8:hover{color:#5d93ff}.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{max-width:40rem;margin:0 auto;padding:0 .9375rem}.Post-module--post__home-button--16Kl0{display:block;max-width:5.625rem;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;text-align:center;color:#222;border:1px solid #e6e6e6;border-radius:1.25rem;font-size:1rem;font-weight:400;margin-left:auto;margin-right:auto;margin-top:1.625rem}.Post-module--post__home-button--16Kl0:focus,.Post-module--post__home-button--16Kl0:hover{color:#5d93ff}@media screen and (min-width:960px){.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{padding:0}.Post-module--post__home-button--16Kl0{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}</style><meta name="generator" content="Gatsby 2.20.12"/><link rel="alternate" type="application/rss+xml" title="Blog - Erwan Deruelle" href="/d3rwan-blog/rss.xml"/><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id="></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/d3rwan-blog/sitemap.xml"/><link rel="icon" href="/d3rwan-blog/icons/icon-48x48.png?v=5a95576050eb0ca6c486e2048b8195a5"/><link rel="manifest" href="/d3rwan-blog/manifest.webmanifest"/><meta name="theme-color" content="#F7A046"/><link rel="apple-touch-icon" sizes="48x48" href="/d3rwan-blog/icons/icon-48x48.png?v=5a95576050eb0ca6c486e2048b8195a5"/><link rel="apple-touch-icon" sizes="72x72" href="/d3rwan-blog/icons/icon-72x72.png?v=5a95576050eb0ca6c486e2048b8195a5"/><link rel="apple-touch-icon" sizes="96x96" href="/d3rwan-blog/icons/icon-96x96.png?v=5a95576050eb0ca6c486e2048b8195a5"/><link rel="apple-touch-icon" sizes="144x144" href="/d3rwan-blog/icons/icon-144x144.png?v=5a95576050eb0ca6c486e2048b8195a5"/><link rel="apple-touch-icon" sizes="192x192" href="/d3rwan-blog/icons/icon-192x192.png?v=5a95576050eb0ca6c486e2048b8195a5"/><link rel="apple-touch-icon" sizes="256x256" href="/d3rwan-blog/icons/icon-256x256.png?v=5a95576050eb0ca6c486e2048b8195a5"/><link rel="apple-touch-icon" sizes="384x384" href="/d3rwan-blog/icons/icon-384x384.png?v=5a95576050eb0ca6c486e2048b8195a5"/><link rel="apple-touch-icon" sizes="512x512" href="/d3rwan-blog/icons/icon-512x512.png?v=5a95576050eb0ca6c486e2048b8195a5"/><title data-react-helmet="true">Yarn, un n-ième package-manager ? - Blog - Erwan Deruelle</title><meta data-react-helmet="true" name="description" content="Qu’est-ce que se cache vraiment derrière ce n-ième package-manager, annoncé il y a quelques semaines par Facebook"/><meta data-react-helmet="true" property="og:site_name" content="Yarn, un n-ième package-manager ? - Blog - Erwan Deruelle"/><meta data-react-helmet="true" property="og:image" content="https://d3rwan.github.io/d3rwan-blog/media/yarn/logo.jpeg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Yarn, un n-ième package-manager ? - Blog - Erwan Deruelle"/><meta data-react-helmet="true" name="twitter:description" content="Qu’est-ce que se cache vraiment derrière ce n-ième package-manager, annoncé il y a quelques semaines par Facebook"/><meta data-react-helmet="true" name="twitter:image" content="https://d3rwan.github.io/d3rwan-blog/media/yarn/logo.jpeg"/><link as="script" rel="preload" href="/d3rwan-blog/webpack-runtime-a10908d71a2f767893f4.js"/><link as="script" rel="preload" href="/d3rwan-blog/framework-88c48abae272a3bc68e7.js"/><link as="script" rel="preload" href="/d3rwan-blog/app-6a7feee794e305ff970e.js"/><link as="script" rel="preload" href="/d3rwan-blog/styles-083a06cb5740baaf347d.js"/><link as="script" rel="preload" href="/d3rwan-blog/02829756d7c9841fdd33d32bcc7843fcf4b76a8f-3a6d505aae3bf17c2e41.js"/><link as="script" rel="preload" href="/d3rwan-blog/06a1f2c941cd55aef4842384529632245d8720e1-87f6c214daddf9a7b43d.js"/><link as="script" rel="preload" href="/d3rwan-blog/component---src-templates-post-template-js-6279ae0603857b831b13.js"/><link as="fetch" rel="preload" href="/d3rwan-blog/page-data/posts/yarn/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/d3rwan-blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--layout--3Pyz6"><div><a class="Post-module--post__home-button--16Kl0" href="/d3rwan-blog/">&lt; Home</a><div><div class="Content-module--content--3p512"><h1 class="Content-module--content__title--2BDW9">Yarn, un n-ième package-manager ?</h1><div class="Content-module--content__body--2TrQ-"><p>Npm, Bower, JSPM… A chaque saison son nouveau package-manager dans l’écosystème JS. Le dernier né, Yarn, a été annoncé il y a quelques semaines par les développpeurs de Facebook. Alors, qu’est-ce que se cache vraiment derrière ce n-ième package-manager ?</p>
<p><a href="https://code.facebook.com/posts/1840075619545360" target="_blank" rel="nofollow noopener noreferrer">Yarn: A new package manager for JavaScript</a></p>
<p>En premier lieu, Yarn n’a pas l’objectif de remplacer npm ou bower. Il s’agit avant-tout d’un nouveau client ligne de commande permettant la récupération de dépendances depuis le registry npm.</p>
<p>Il propose en outre les améliorations suivantes :</p>
<ul>
<li><strong>Performance</strong>
Optimisation des appels et maximisation de l’utilisation réseau, notamment via un mécanisme d’analyse de l’arbre des dépendances et de parallélisation des requêtes (vs. en série pour npm)</li>
<li><strong>Déterministe</strong>
Pour un même projet, les mêmes dépendances seront installées de la même manière sur tous les environnements (plus d’effet <em>“ it works on my machine”</em>)</li>
<li><strong>Fonctionnement offline</strong>
Une fois un package installé, il est mis en cache et pourra être installé ensuite sans connexion internet</li>
<li><strong>Résilience</strong>
Le processus d’installation est plus robuste, notamment dans le cas de coupure réseau (rejeu des requêtes vs. processus d’installation en erreur)</li>
<li><strong>Registre multiple</strong>
Possibilité de récupérer des sources depuis plusieurs registres (npm, bower, github, …)</li>
<li><strong>Sécurité</strong>
Utilisation de checksums pour vérifier l’intégrité des dépendances</li>
</ul>
<h2 id="mise-en-place" style="position:relative;"><a href="#mise-en-place" aria-label="mise en place permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mise en place</h2>
<p>Pour installer Yarn, le plus simple est encore d’utiliser… npm.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install -g yarn</code></pre></div>
<p>Dès lors, on peut utiliser le client yarn en lieu et place du client npm</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"># npm install
yarn

# npm init
yarn init

# npm install angular --save
yarn add angular 

# npm install gulp --global
yarn global agg gulp

# npm uninstall angular --save
yarn remove angular

# npm install angular-mocks --save-dev
yarn add angular-mocks --dev</code></pre></div>
<p><img src="/d3rwan-blog/media/yarn/yarn_loading.gif" alt="Installation avec Yarn"><em>Installation avec Yarn</em></p>
<p>Pour le reste, on continue d’utiliser le fichier <em>package.json</em> pour lister les dépendances d’un projet, dépendances qui seront toujours stockées dans le répertoire <em>node_modules</em>. Yarn ajoute néanmoins un nouveau fichier <em>yarn.lock</em>. C’est ce fichier qui va garantir l’installation déterministe, puisqu’il va lister chaque dépendance, la version exacte à utiliser, l’ordre d’installation etc… Ce fichier sera crée lors de la première installation par Yarn, puis mis à jour ensuite lors de chaque modification.</p>
<p>Il est important de noter que ce fichier doit <strong>être présent sur chaque environnement</strong> afin de garantir une installation <strong>déterministe</strong>, et donc qu’il <strong>doit être versionné</strong>.</p>
<p>Et les perfs dans tout ca ? Sur un benchmark sur le site de Yarn (donc probablement hyper objectif), les chiffres sont là. C’est <em>vachement</em> plus rapide dans la plupart des cas.</p>
<p><img src="/d3rwan-blog/media/yarn/bench.png"></p>
<p><img src="/d3rwan-blog/media/yarn/bench2.png" alt="Benchmark NPM / YARN (source: [https://yarnpkg.com/en/compare](https://yarnpkg.com/en/compare))"><em>Benchmark NPM / YARN (source: <a href="https://yarnpkg.com/en/compare" target="_blank" rel="nofollow noopener noreferrer">https://yarnpkg.com/en/compare</a>)</em></p>
<p>Et en réalité ?</p>
<p>Pour comparer les performance entre les deux outils, j’ai utilisé l’utilitaire <a href="https://www.npmjs.com/package/npmvsyarn" target="_blank" rel="nofollow noopener noreferrer">npmvsyarn</a> qui permet de comparer pour une librairie ou un projet (contenant un <em>package.json</em>) donnés les performances entre l’utilisation de npm &#x26; celle de Yarn.</p>
<p><img src="/d3rwan-blog/media/yarn/ex.png" alt="Exemple avec les librairies Angular &#x26; React"><em>Exemple avec les librairies Angular &#x26; React</em></p>
<p>Concernant l’ajout/suppression d’une librairie seule, Yarn est effectivement plus rapide (jusqu’à 50%), en particulier lorsque le cache et le fichier yarn.lock existe.</p>
<p><img src="/d3rwan-blog/media/yarn/ex2.png"></p>
<p><img src="/d3rwan-blog/media/yarn/ex3.png" alt="Exemple avec un projet React ([redux-webpack-es6-boilerplate](https://github.com/nicksp/redux-webpack-es6-boilerplate)) et un projet Angular ([angular1.4-ES6-material-webpack-boilerplate](https://github.com/shprink/angular1.4-ES6-material-webpack-boilerplate))"><em>Exemple avec un projet React (<a href="https://github.com/nicksp/redux-webpack-es6-boilerplate" target="_blank" rel="nofollow noopener noreferrer">redux-webpack-es6-boilerplate</a>) et un projet Angular (<a href="https://github.com/shprink/angular1.4-ES6-material-webpack-boilerplate" target="_blank" rel="nofollow noopener noreferrer">angular1.4-ES6-material-webpack-boilerplate</a>)</em></p>
<p>Sur un projet complet, Yarn s’en sort mieux également (jusqu’à 2.5 fois plus rapide). Là encore, on voit que la présence du cache et du <em>yarn.lock</em> améliore d’autant plus les performances.</p>
<p>Bien évidemment, ces exemples sont trop limités pour être représentatifs. Néanmoins, le site <em>berriart.com</em> propose un benchmark plus complet des deux outils sur différents environnements d’intégration continue.</p>
<p><a href="https://www.berriart.com/blog/2016/10/npm-yarn-benchmark/" target="_blank" rel="nofollow noopener noreferrer">NPM vs Yarn benchmark</a></p>
<p>Là encore, les résultats vont dans le même sens:</p>
<blockquote>
<p><em>Yarn est entre 2x et 3x plus rapide que npm</em></p>
</blockquote>
<h2 id="conclusion" style="position:relative;"><a href="#conclusion" aria-label="conclusion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>Après quelques heures d’utilisation, Yarn semble répondre aux attentes qu’il a suscité: plus rapide que npm, avec des fonctionnalités équivalentes, et une migration sans heurts.</p>
<p>Bien qu’il soit sans doute peut-être un peu tôt pour l’utiliser sur un projet structurant en production, il semble dès aujourd’hui être une alternative crédible au client npm par défaut. On pourra donc facilement l’utiliser sur un nouveau projet ou un projet annexe, afin de confirmer toutes les bonnes prédispositions affichées.</p>
<p>Quant au futur, on ne peut qu’espérer qu’il permette l’amélioration de l’existant, que se soit en poussant à l’amélioration de npm ou en devenant un standard defacto. A moins qu’un petit-nouveau n’arrive d’ici là, et change encore la donne…</p></div></div></div><div class="Post-module--post__footer--3WzWU"><div class="Tags-module--tags--1L_ct"><ul class="Tags-module--tags__list--91FqN"><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/d3rwan-blog/tag/js/">JS</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/d3rwan-blog/tag/yarn/">Yarn</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/d3rwan-blog/tag/npm/">Npm</a></li></ul></div><div><p class="Meta-module--meta__date--29eD7">Published on <!-- -->November 10, 2016</p></div></div><div class="Post-module--post__comments--25y6I"></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/yarn";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-6a7feee794e305ff970e.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-0849e6483c9006ac9858.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-0d45aadac3c5082d3994.js"],"component---src-templates-tags-list-template-js":["/component---src-templates-tags-list-template-js-1ea3b17b8d0cae65adb3.js"],"component---src-templates-categories-list-template-js":["/component---src-templates-categories-list-template-js-37e05ac1e5e79e3b2541.js"],"component---src-templates-languages-list-template-js":["/component---src-templates-languages-list-template-js-382da22c5a5b59dda3ec.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-6279ae0603857b831b13.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-1b2e10dc7266e6298e9f.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-65e4ffa33a87c6dad430.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-c690e4afece3736bd449.js"],"component---src-templates-language-template-js":["/component---src-templates-language-template-js-ca215506ddf8420c3bcc.js"]};/*]]>*/</script><script src="/d3rwan-blog/component---src-templates-post-template-js-6279ae0603857b831b13.js" async=""></script><script src="/d3rwan-blog/06a1f2c941cd55aef4842384529632245d8720e1-87f6c214daddf9a7b43d.js" async=""></script><script src="/d3rwan-blog/02829756d7c9841fdd33d32bcc7843fcf4b76a8f-3a6d505aae3bf17c2e41.js" async=""></script><script src="/d3rwan-blog/styles-083a06cb5740baaf347d.js" async=""></script><script src="/d3rwan-blog/app-6a7feee794e305ff970e.js" async=""></script><script src="/d3rwan-blog/framework-88c48abae272a3bc68e7.js" async=""></script><script src="/d3rwan-blog/webpack-runtime-a10908d71a2f767893f4.js" async=""></script></body></html>